# 空间数据结构
对空间逻辑数据模型描述的数据组织关系和编排方式，对地理信息系统中数据存储、查询检索和应用分析等操作效率有着至关重要的影响。
如：游程长度编码结构、四叉树结构都是栅格数据模型的具体实现。在gis中常有栅格数据结构和矢量数据结构，除此之外还有混合数据结构、镶嵌数据结构和多维数据结构。
# 矢量数据结构
- 对矢量数据模型进行数据的组织，通过记录实体坐标及其关系，精确的表示点、线、多边形等地理实体。
- 具有数据精度高、存储空间小等特征，是一种高效的图形数据结构。
- 按照是否明确表示地理实体间空间关系分为实体数据结构、拓扑数据结构。
# 实体数据结构
构成多边形的各个线段，以多边形为单位进行组织，对点、线、面都单独编码并记录坐标的一种数据结构。

- 优点：数据结构编码容易、数字化操作简单和数据编排直观。
- 缺点：

   - 相邻多边形公共边界数字化两遍，造成数据冗余，可能导致公共边界出现间隙和重叠。
   - 缺少多边形的邻域信息和图形的拓扑关系
   - 只适用于简单系统，如：计算机地图制图系统
# 拓扑数据结构（简述其包含）
描述对象与周边对象关系特征的数据结构。拓扑结构分为索引式结构、双重独立编码结构、链状双重独立编码结构。
# 索引式结构
采用树状索引以减少数据冗余并间接增加邻域信息。

具体方法是：对所有边界点进行数字化，将坐标对以顺序方式存储，由点索引与边界线号相联系，以线索引与各多边形相联系，形成树状索引结构。

优缺点：树状索引消除了相邻多边形的数据冗余和不一致问题，在简化过于负责的边界线或合并多边形时可不必改造索引表。但两个编码表都需要人工方式建立，工作量大且容易出错。
# 双重独立编码结构（DIME）
对网状或面状要素中的任何一条线段，用其顺序的两点及相邻多边形给予定义，组成一个弧段文件。

利用这种拓扑关系组织数据可以有效的进行数据存储正确性检查，同时便于对数据进行跟新和检索。

利用这种结构可以自动形成多边形，检查线文件数据的正确性。
# 链状双重独立编码结构
是DIME的一种改进，DIME只能用直线两端点的序号和相邻多边形表示，在链状数据结构中，将若干直线段合成一个弧段，每个弧段可以有许多中间点，它也被称为多边形转换器。
# 网络数据结构
由一组相连的边和结点及连通性规则组成，用于表示现实世界中的网状线性系统。

网络数据结构是GIS数据建模和空间分析所必须的一种常用数据结构。

采用网络数据结构进行建模常见实体包括交通网络系统、电力系统、地下官网系统和河网系统等。
# 栅格数据结构（简述其包含）
以规则栅格阵列表示空间对象的数据结构称为栅格数据结构。

阵列中每个栅格单元上的数值表示空间对象的属性特征。

即每个栅格阵列中每个单元的行列号确定位置，属性值表示空间对象的类型、等级等特征。每个栅格单元只能存储一个值，所以栅格数据结构表示的地表是不连续的，是量化和近似离散的数据。

特点：属性明显，定位隐含，即数据直接记录属性的指针或者属性本身，所在位置则根据行列号转换相应的坐标给出，也就是说定位是根据数据在数据集中的位置得到的。

优缺点：同时具有数据结构简单、数学模拟方便。缺点是数据量大，难以建立实体间的拓扑关系、通过改变分辨率而减少数据量时精度和信息量的同时受损。
# 完全栅格数据结构（也称编码）
将栅格看作一个数据矩阵，逐行逐个记录栅格单元的值。

是最简单最直接的一种栅格编码方法。

它不采用任何压缩数据的处理，因此是最直观、最基本的栅格数据组织方法。
# 压缩栅格数据结构

- 游程长度编码结构
- 四叉树结构
- 二维行程编码结构
- 链码结构
# 游程长度编码结构
 游程指相邻同值网格的数量，游程长度编码结构是栅格数据无损压缩的重要方法，第
本思想为：对于一幅棚格数据，常有行或列方向上相邻的若干点具有相同的属性代码，因
而可采取某种方法压缩重复的记录内容。  
 具体编码方案为：只在各行或列数据值发生变化时依次记录该值以及相同值重复的个
数，从而实现数据的压缩。其目的是压缩栅格数据量，消除数据间的元余。游程编码能否
压缩数据量，主要决定于翔格数据的性质，元余度越高，压缩效果越好。  
 游程长度编码压缩数据是十分有效且简便的。压缩比的大小与图的复杂程度是成反比
的，在变化多的部分，游程数就多，变化少的部分游程数就少，原始栅格类型越简单，压
缩效率就越高。因此这种数据结构最适宜于类型面积较大的专题要素、遥感图像的分类结
构，而不适合于类型连续变化或类型分散的分类图。  
 游程长度编码在对栅格进行加密时，数据量没有明显增加，压缩效率较高，且易于检
索、叠加和合并等操作，运算简单，适用于机器存储容量小，数据需大量压缩，而又要避
免复杂的编码解码运算增加处理和操作时间的情况。  

# 四叉树结构
 对栅格数据进行压缩的一种方法，思路为：将一幅栅格数据层按照四个象限进行递归分割n次，每次分割形成20x20个子象限，逐块检查格网属性值，如果子区所有格网属性相同，则停止再分，此时该子区不论大小，均作为最后的存储单元。否则，便继续将子区分为4 个子区，依次检查下去。通过这样，实现对数据的压缩。
	这四个等分区称为四个子象限，按顺序为左上(W)、右上（NE)、左下(SW)、右下（SE)，其结果是一棵倒立的树。  
优缺点：
 优点：压缩效率高，压缩和解压缩比较方便，阵列各部分的分辨率可不同，既可精确
地表示图形结构，又可减少存储量，易于进行大部分图形操作和运算。
	缺点：不利于形状分析和模式识别，即具有图形编码的不定性，如同一形状和大小的
多边形可得出完全不同的四叉树结构。

# 生成四叉树方法
 	即自上而下方式和自下而上方式。自上而下方式是先检测全区域，其值不相同时即四义分割，直到最小棚格或数值都相同为正：自下向上扫描栅格单元的顺序伐码称为莫顿 （Morton)码。
# 四叉树存储方法
常规四叉树和线性四叉树
常规四又树：常规四又树每个节点通常储存6个量，即4个子节点指针、二个父节点指针和一个节点值
规四叉树可采用自下而上的方法建立，对栅格按莫顿码顺序进行这种方法除了要记录叶 节点外，还妥记录中间节点。印每记录四个不相同节点时，即生成其父节点作为中间节点。如果四个节点相同，则合并生成上一级的一个父节点。
优点：常规四叉树在处理上简便灵活，而且当栅格矩阵很大，存储和处理整个矩阵较困难时，采用常规四又树存储法，可以根据需要将之分成4块、16块、64块等，每块分别进行四叉树存储。需要时，可将它们合并成一棵树，合并的方法对常规四叉树来说很容易实现。
线性四叉树： 线性四叉树每个节点只储存3个量，即莫顿码、深度（或节点大小）和节点值。线性四又树编码的基本思想是：不需记录中间节点，0 值节点，也不使用指针仅记录非0 值叶节点，并用莫顿码表示叶节点的位置。
优点： 线性四叉树编码压缩效率高，压缩和解压缩比较方便，阵列各部分的分辩率可不同，既可精确地表示图形结构，又可减少存贮量，易手进行大部分图形操作和运算。  
缺点： 不利于形状分析和模式识别，即具有图形编码的不定性，如同一形状和大小的
多边形可得出完全不同的四叉树结构  
# 二维行程编码结构
 	概念：类似于传统的一维行程编码，对应线性表先记录人口地址和格网值，一次扫描线性表，若后一格网值不等于前一格网的值，记录后一格网的地址码和相应的格网值。这种二维行程编码中，前后两个地址码之差表达了该行程段的格网数，它可以表达该子块的大小。
 	 基本思想：将线性四叉树的线性表按四叉树的地址码（Morton 码）的大小顺序排列，出现届性值相同而又相邻排列的情况，将相同的叶节点合并得到二维行程编码结构。  
 	优点：与规则的四叉树相比，二维行程编码结构又进一步压缩了数据，更节省存储空间，市且有利于以后的插入、刪除、修改等操作。它与线性四叉树的相互转换也非常容易和快速，因此可将它们视为相同的结构概念。
# 链码结构
链码数据结构首先采用弗里曼 (Freeman）码对栅格中的线或多边形边界进行编码，然后再组织为链码结构的文件。链式编码将线状地物或区域边界表示为：由某一起始点和在某些基本方向上的单位矢量链组成。单位矢量的长度为一个栅格单元，每个后续点可能位手其前继点的8个基本方向之一。
# 影像金字塔
 影像金字塔是指在统一的空间参照下，根据用户需要以不同分辦率进行存储与显示，形成分辨率由粗到细、数据量由小到大的金字塔结构。影像金字塔结构用于图像编码和渐进式图像传输，是一种典型的分层数据结构形式，适合于栅格数据和影像数据的多分辨率组织，也是一种栅格数据或影像数据的有损压缩方式。在金字塔结构里，图像被分层表示。在金字塔结构的最顶层，存储最低分辦率的数据：随着金字塔层数的增加，数据的分辨率
依次降低；在金字塔结构的底层，则存储能满足用户需要的最高分辦率的数据。  
# 矢量栅格对比
![image.png](https://cdn.nlark.com/yuque/0/2022/png/2140865/1651561766137-9742b2fd-283b-40f8-b015-000e692e5866.png#clientId=u16538672-61a9-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=1010&id=u3363288d&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1010&originWidth=2436&originalType=binary&ratio=1&rotation=0&showTitle=false&size=3321015&status=done&style=none&taskId=ue183d031-d0da-49ba-9eb5-3ad0ee5c777&title=&width=2436)
# 矢量转栅格
 矢量数据转换为栅格数据之前，需要先确定栅格像元的大小、像元值分配类型及分配原则。栅格像元的大小决定了数据的输出精度。像元值的分配类型和分配原则主要用于确 定多个对象落入同一个像元中时像元值的计算方式。矢量数据转栅格数据的常用要索类型有点、线、面和体要素类型。  
# 栅格转矢量
矢量化前先要做边界提取，然后将它处理成近似线划图的二值图像，最后才能转矢量。
 矢量化的具体过程如下：
①从图幅西北角开始，按顺时针或逆时针方向，从起始点开始，根据8个邻域的先后顺序进行搜素，依次跟踪相邻点，找出线段经过的栅格。
②将栅格坐标 (i,i）变成直角坐标 (x,V)。
③生成拓扑关系，对于以矢量表示的边界孤段，判断其与原图上各多边形的空间关系，形成完整的拓扑结构，并建立与属性数据的联系。
④去除多余点及对曲线平滑化。由于搜索是逐个栅格进行的，必须去除由此造成的多余点记录以减少元余。搜索结果曲线由于栅格精度的限制可能不够圆滑，需要采用一定的插值算法进行乎滑处理。常用的算法有线性迭法、分段三次多项式插值法、正轴抛物线平均加权法、斜轴抛物线乎均加权法、样条函数插值法等  

# 矢量栅格一体化
 矢量和栅格数据结构各有其优缺点，把两种数据结构的优点结合起来将有利于地理空间现象的统一表达。龚建雅研究提出构造矢量-栅格一体化数据结构，其设计思路是：面状实体的边界采用矢量数据结构描述，而其内部采用栅格数据结构表达；线状实体一般采用矢量数据结构表达，同时将线所经过位置以栅格 单元进行充填：点实体则同时描述其空间坐标以及栅格单元位置。其理论基础包括多级格网方法、三个基本约定和线性四叉树编码。多级格网方法是将栅格划分成多级格网：粗格网、基本格网和细分格网。为了使上述栅格数据具有矢量的特点，对点状地物、线状地物和面状地物做三个约定：
(1）点状地物仅有空间位置而无形状和面积， 在计算机中仅有一个坐标数据：
(2）线状地物有形状但无面积，在计算机中需要组织一组元子〈即栅格单元）填满的路径表达：
(3）面状地物有形状和面积，在计算机中由一组元子表达的填满路径的边界线和内部(空洞外均填满)的区域组成。  
# 镶嵌数据结构
指的是Voronoi数据结构（泰森多边形）和TIN数据结构（三角网）
# Voronoi数据结构（泰森多边形）
 特点：组成多边形的边总是与两相邻样点的连线垂直，并且多边形内的任何位置总是离该多边形内样点的距离最近，离相邻多边形内样点的距离远，且每个多边形内包含且仅包含一个样点，因此，以Voronoi 多边形内的样点属性作为整个多边形区域的属性。只要给定具有若干空间离散点，根据 Voronoi 多边形的构造方法就可获得完整覆盖地理区域的Voronoi 多边形。
	应用：由于 Voronoi 图在空间剖分上的等分性特征，在许多领域获得了应用，除表达地理空间现象外，voronoi 多边形还可有效地用于许多空间分析问题，如邻接、接近度和可达性分析等，以及解决最近点、最小封闭圆问题。  

# TIN数据结构（三角网）
 	TIN 采用不规则的三角网形成对地理空间的完整覆盖。在工IN模型中，样点的位置控制着三角形的顶点，这些三角形尽可能接近等边。IN 能较好地表达地理现象的空间变化，如地形表面就可用三角网拟合，此时三角形看做是空间的三角面片。三角网的优点是，角形大小随样点密度的变化自动变化，所有样点都称为三角形的顶点，当样点密集时生成的三角形小，而样点较稀时则三角形较大。TI 在表示不连续地理现象时也具有优势，如用 TIN 表示地形的变化，将悬崖、断层、海岸线、山谷山脊线等作为约束条件，可构造约束 TIN。
优点：
1.充分利用地形的特征点，线，面，能较好的表示复杂地形：
2.根据不同地形，选取合适的采样点数；
3.进行地形分析和绘制立体图也很方便。
缺点：
1.数据结构复杂，不方便规范化与管理，
2.难以与矢量和栅格数据联合分析。  

# 多维数据结构
将三维及以上维度的数据模型称为多维数据模型，其中三维数据模型是和时空数据模型是最为常见的多维数据模型。
# 八叉树数据结构
 可以看成是二维栅格数据中的四叉树在三维空间的推广。该数据结构是将所要表示的三维空间V按X，Y，乙三个方向从中间进行分割，把V 分割成八个立方体；然后根据每个立方体中所含的目标来决定是否对各立方体继续进行八等份的划分，一直划分到每个立方体被一个目标所充满，或没有目标，或其大小己成为预先定义的不可再分的体素为止。
优点：可以非常方便地实现有广泛用途的集合运算（例如，可以求两个物体的并、交差等运算），而这些恰是其他表示方法比较难以!处理或者需要耗费许多计算资源的地方。不仅如此，由于这种方法的有序性及分层性，因而对显示精度和速度的平衡、隐线和隐面的消除等，带来了很大的方便。    
# 三维边界表示法
即通过指定平面多面体的顶点位置、构成边的顶点以及构成面的边来表示三维物体的方法。比较常用的三维边界表示法是采用三张表来提供点、边、面的信息。而对于多面体的颜色、纹理等属性特征，常用另一个表独立存放。这样就可以避免重复地表示某些点、边、面，节省贮量空间，对图形显示更有好处。比较常用的三维边界表示法是采用三张表来提供点、边、面的信息，这三张表就是：
1。顶点表，用来表示多面体各顶点的坐标；
2.边表，指出构成多面体某边的两个顶点
3.面表，给出围成多面体某个面的各条边。对于后两个表，—般使用指针的方法来指出有关的边、点存放的位置。  
# 时空一体化数据模型（时空GIS）
概念： 地理时空数据模型是一种有效组织和管理时态地理数据，属性、空间和时间语义更完整的地理数据模型。时空数据模型表达了随时间变化的动态结构，用于地理空间数据的时态变化分析。一个合理的时空数据模型必须要考虑几个因素：节省存储空间、加快存取速度、表现时空语义。
分类： Gis 中时空一体化数据结构和数据模型注重以一体化的形式表达地理数据在时间和空问方面的特性。包括时间片快照模型、地图叠加模型、时空合成模型。
①常规的时空数据模型即属于时间片快照模型。它是用一系列状态对应的地理数据来反映地理现象的时空演化过程，其中可分为矢量快照模型和栅格快照模型两类。
②底图叠加模型由于类似于地理底图的修订方式而得名。它的基本思路是，首先确定空间数据的初始状态，即底图数据：然后按照适宜的时间间隔记录数据随时间发生的变化：再通过空间叠加操作，利用记录的变化数据来恢复各个时间片的状态数据，每一次叠加则表示状态的一次变化。
③时空合成模型是在底图叠加模型的基础上提出的。设计思想是将每一次独立的叠加操作转换为一次性的合成叠加，变化的累积即形成最小变化单元，由这些最小变化单元构成的图形文件和记录变化历史的属性文件联系在一起，则可较完整地表达数据的时空特征。

# 简述空间数据压缩的方法有那些
柵榕数据压缩包括游程长度编码、四叉树编码等，矢量数据具体的压缩方法包括垂距
法、光栏法和道格拉斯一普克 (Douglas-Peucker) 法等。
1.游程长度编码（Run-Length Code, RLC)是指对于一幅栅格图像，常常有行或列方向上相邻的若千栅格具有相同的属性代码，因币可采取某种方法压缩那些重复的记录内容。其编码方案是：只在各行（或列，的代码发生变化时依次记录该代码以及相同代码重复的个数。从而实现数据的压缩。
2.四叉树编码指空间要素的区域信息可用四叉树数据结构存储，这种数据结构的原理可以表述为：将空间区域按照四个象限进行递归分割 （21x22，且吧），直到子象限的数值单调为止。凡数值（特征码或类型值，呈单调的单元，不论单元大小，均作为最后的存储单元。
3.垂距法的原理为利用三点中的中间点到前后两点连线的垂距是否满足或超过限差来判别该点是保留还是删除，如下图所示，该法的优点是算法简单、速度快，但其缺陷是易删去特征点。
4.光栏法的基本思想：定义一个扇形区城，迎过判断曲线上的点在扇形外还是在扇形内，确定保留还是舍去。
5.道格拉斯一-普克 （Douglas-Pencker） 法基木 思想是曲远到近，找与矢量两端点连线的垂足最大的顶点判断其是否满足要求。   
# 简述栅格数据压缩编码的几种方式和各自的优点
（1）游程长度编码
原理：对于一幅栅格数据《或影像），常常有行(或列）方向上相邻的若千点具有相同的属性代码，只在各行或列数据值发生变化时依次记录该值以及相同值重复的个数，从而实现数据的压缩。
优缺点：这种栅格编码对多边形的表示具有很强的数据压缩能力，并且具有一定的运算功能，如面积和周长的计算等，探测边界急弯和凹进部分等都比较容易，比较适于存储图形数据：缺点是对叠置组合、相交等则很难实施，对局部修改将改变整体结构，效率较低，而且由于链码以及每个区域为单位存储边界，相邻区域的边界则被重复存储而产生冗余。
(2）四叉树数据结构
原理：将一幅栅格数据层或图像等分为四部分，逐块检查其格网属性值（或灰度)；如果某个子区的所有格网值都具有相同的值，则这个子区就不再继续分割，否则还要把这个子区再分割成四个子区；这样依次地分割，直到每个子块都只含有相同的属性值或灰度为止。
优缺点：这种编码方式压缩效率高，压缩和解压缩比较方便，阵列各部分的分辦率不同，既可以精确地表示图形结构，又可以减少存储量，易于进行大部分图形操作和运算。缺点是不利于形状分析和模式识别，即具有图形编码的不定性，如同一形状和大小的多边形可得出完全不同的四叉树结构。
(3）链码数据结构
原理：首先采用弗里曼码对栅格中的线或多边形边界进行编码，然后再组织为链码结构的文件。链式编码将线状地物或区域边界表示为：由某一起始点和在某些基本方向上的单位矢量链组成。
优缺点：链码结构可以有效地压缩栅格数据，特别是对计算面积、长度、转折方向和四凸度等运算十分方便，缺点是对边界做合并和插入 等修改，编辑比较困难。这种结构有些类似矢量结构，但不具有区域的性质，因此对区域空间分析运算比较困难。  
# 简述矢量数据压缩编码的几种方式和各自的优点
 (1）实体数据结构
原理：边界坐标数据和多边形单元实体一一对应，各个多边形边界点都单独编码并记录坐标。
优点：结构简单、直观、易实现以实体为单位的运算和显示。缺点：相邻多边形的公共边界被数字化并存储两次，造成数据冗余和碎屑多边形——数据不一致，浪费空问，导致双重边界不能精确匹配。自成体系，缺少多边形的邻接信息  无活扑关系，难以进行邻媒处理。過作为一一个单个图形，没有与外界至边论成系，
(2）拓扑数据结构
①索引式数据结构
原理：索引式数据结构是对所有边界点进行数字化，将坐标对以顺序方式存街，由过表引与边界线号相联系，以线素引与各多边形相联系，形成树状紫引结构。
优点：用建索引的方法消除多边形数据的元余和不一致，邻接信息、岛信息可在多力形文件中通过是否公共弧段号的方式查询。
缺点：表达拓扑关系较繁琐，给相邻运算、消除无用边、处理岛信息、检素拓扑关系等带来困难，以人工方式建立编码表，工作量大，易出错。
②双重独立编码 (DIVE)
原理：双重独立编码结构是对图上网状或面状要素的任何一条线段，用顺序的两点定义以及相邻多边形来子以定义。
优点：利用这种拓扑关系可以来组织数据，可以有效地进行数据存储正确性检查(如多边形是否封闭），同时便于对数据进行更新和检索。
缺点：在表示线段的时候，一条线只能用直线两端点的序号及相邻的多边形来表示。不能显示线段中间部分的细节。
③链状双重独立编码
原理：链状双重独立式数据结构是 DIVE 数据结构的一种改进，在链状数据结构中，将若干直线段合为一个弧段（或链段），每个孤段可以有许多中间点。链状双重独立式数居结构主要由四个文件组成：多边形，弧段文件，弧段坐标文件，节点文件。
优点：是双重独立编码数据结构的一种改进。在双重独立编码数据结构中，一系线尺能用直线两躺点的序-号及相邻的多边形求表示，而在链状数据结构中，将者干直线段合为一个弧段（或链段），每个弧段可以有很多中间点。
缺点：算法实现较为闲难，数据量也会相对较大。  
# 常用的多维数据结构有那些
 (1）八叉树数据结构
可以看成是二维栅格数据中的四又树在三维空间的推广。该数据结构是将所要表示的三维空间 V按X，Y，乙三个方向从中间进行分割，把V分割成八个立方体：然后根据每个立方体中所含的目标来决定是否对各立方体继续进行八等份的划分，一直划分到每个立方体被一个目标所充满，或没有目标，或其大小己成为预先定义的不可再分的体素为止。
(2）三维边界表示法
即通过指定平面多面体的顶点位置、构成边的顶点以及构成面的边来表示三维物体的方法。比较常用的三维边界表示法是采用三张表来提供点、边、面的信息。而对于多面体的颜色、纹理等属性特征，常用另一个表独立存放。这样就可以避免重复地表示某些点、边、面，节省贮量空间，对图形显示更有好处。  

